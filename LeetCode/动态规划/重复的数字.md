# 1012. Numbers With Repeated Digits

[题目链接](https://leetcode.com/problems/numbers-with-repeated-digits/)

[TOC]

### 思路

* 问题转换，直接求至少有一个重复的数字不好求，那么我们求出`1~N`中，一次都没有重复的数字为`noDup`，那么答案为`N - noDup`

#### 动态规划

```cpp
class Solution {
public:
    int numDupDigitsAtMostN(int N) {
        if(N<10) return 0;
        int k = 0;
        for(int i = N ;i>0;i/=10) k++;
        vector<int> digit(k,0);
        for(int i = 0,j = N;i<k;i++,j/=10) digit[k - i - 1] = j%10;
        
        vector<int> noDupBase(k,0);
        int noDupBaseSum = 0;
        
        for(int i = 0; i < k - 1; i++)
        {
            noDupBase[i] = i == 0 ? 9 : noDupBase[i-1] * (10 - i);
            noDupBaseSum += noDupBase[i];
        }
        
        vector<int> count(10,0);
        vector<int> noDupRes(k,0);
        bool duplicate = false;
        
        for(int i = 0;i< k;i++)
        {
            noDupRes[i] = i==0?9:noDupRes[i-1] *(10-i);
            if(!duplicate)
            {
                int diff = 0;
                for(int j = digit[i] + 1 ;j < 10;j++) diff += count[j] == 0;
                noDupRes[i] -= diff;
                count[digit[i]]++;
                if(count[digit[i]]>1) duplicate = true;
            }
        }
        
        return N - (noDupBaseSum + noDupRes[k-1]);
    }
};
```

